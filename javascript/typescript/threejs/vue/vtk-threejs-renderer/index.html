<!doctype html>
<!--
  Minimal Mistakes Jekyll Theme 4.21.0 by Michael Rose
  Copyright 2013-2020 Michael Rose - mademistakes.com | @mmistakes
  Free for personal and commercial use under the MIT license
  https://github.com/mmistakes/minimal-mistakes/blob/master/LICENSE
-->
<html lang="en" class="no-js">
  <head>
    <meta charset="utf-8">

<!-- begin _includes/seo.html --><title>Setting up the Three.js renderer - Parresia Simulations</title>
<meta name="description" content="Javascript scientific visualization - Part 4">


  <meta name="author" content="Biswajit Banerjee">
  
  <meta property="article:author" content="Biswajit Banerjee">
  


<meta property="og:type" content="article">
<meta property="og:locale" content="en_US">
<meta property="og:site_name" content="Parresia Simulations">
<meta property="og:title" content="Setting up the Three.js renderer">
<meta property="og:url" content="https://bbanerjee.github.io/ParSim/javascript/typescript/threejs/vue/vtk-threejs-renderer/">


  <meta property="og:description" content="Javascript scientific visualization - Part 4">







  <meta property="article:published_time" content="2017-02-27T23:30:00+13:00">





  

  


<link rel="canonical" href="https://bbanerjee.github.io/ParSim/javascript/typescript/threejs/vue/vtk-threejs-renderer/">




<script type="application/ld+json">
  {
    "@context": "https://schema.org",
    
      "@type": "Person",
      "name": "Biswajit Banerjee",
      "url": "https://bbanerjee.github.io/ParSim/"
    
  }
</script>






<!-- end _includes/seo.html -->


<link href="/ParSim/feed.xml" type="application/atom+xml" rel="alternate" title="Parresia Simulations Feed">

<!-- https://t.co/dKP3o1e -->
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
</script>

<!-- For all browsers -->
<link rel="stylesheet" href="/ParSim/assets/css/main.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5/css/all.min.css">

<!--[if IE]>
  <style>
    /* old IE unsupported flexbox fixes */
    .greedy-nav .site-title {
      padding-right: 3em;
    }
    .greedy-nav button {
      position: absolute;
      top: 0;
      right: 0;
      height: 100%;
    }
  </style>
<![endif]-->



    <!-- start custom head snippets -->

<link rel="stylesheet" href="https://bbanerjee.github.io/ParSim/assets/css/parresia.css">

<!-- insert favicons. use https://realfavicongenerator.net/ -->

<!-- end custom head snippets -->

  </head>

  <script type="text/javascript"
    src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_HTMLorMML">
  </script>

  <body class="layout--single">
    <nav class="skip-links">
  <h2 class="screen-reader-text">Skip links</h2>
  <ul>
    <li><a href="#site-nav" class="screen-reader-shortcut">Skip to primary navigation</a></li>
    <li><a href="#main" class="screen-reader-shortcut">Skip to content</a></li>
    <li><a href="#footer" class="screen-reader-shortcut">Skip to footer</a></li>
  </ul>
</nav>

    <!--[if lt IE 9]>
<div class="notice--danger align-center" style="margin: 0;">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience.</div>
<![endif]-->

    

<div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        
          <a class="site-logo" href="/ParSim/"><img src="/ParSim/assets/img/ParresiaLogoSep2017_plain.png" alt=""></a>
        
        <a class="site-title" href="/ParSim/">
          Parresia Simulations
          <span class="site-subtitle">Parallel particle and finite element simulation</span>
        </a>
        <ul class="visible-links"><li class="masthead__menu-item">
              <a href="/ParSim/docs/articles/">Blog articles</a>
            </li><li class="masthead__menu-item">
              <a href="/ParSim/docs/parsim/">ParSim software</a>
            </li><li class="masthead__menu-item">
              <a href="/ParSim/docs/material-data/">Material data</a>
            </li></ul>
        
        <button class="greedy-nav__toggle hidden" type="button">
          <span class="visually-hidden">Toggle menu</span>
          <div class="navicon"></div>
        </button>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>


    <div class="initial-content">
      



<div id="main" role="main">
  
  <div class="sidebar sticky">
  


<div itemscope itemtype="https://schema.org/Person">

  

  <div class="author__content">
    
      <h3 class="author__name" itemprop="name">Biswajit Banerjee</h3>
    
    
      <div class="author__bio" itemprop="description">
        <p>PhD Mechanical Engineering</p>

      </div>
    
  </div>

  <div class="author__urls-wrapper">
    <button class="btn btn--inverse">Follow</button>
    <ul class="author__urls social-icons">
      
        <li itemprop="homeLocation" itemscope itemtype="https://schema.org/Place">
          <i class="fas fa-fw fa-map-marker-alt" aria-hidden="true"></i> <span itemprop="name">Auckland, NZ</span>
        </li>
      

      
        
          
            <li><a href="mailto:b.banerjee.nz@gmail.com" rel="nofollow noopener noreferrer"><i class="fas fa-fw fa-envelope-square" aria-hidden="true"></i><span class="label">Email</span></a></li>
          
        
          
        
          
        
      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      <!--
  <li>
    <a href="http://link-to-whatever-social-network.com/user/" itemprop="sameAs" rel="nofollow noopener noreferrer">
      <i class="fas fa-fw" aria-hidden="true"></i> Custom Social Profile Link
    </a>
  </li>
-->
    </ul>
  </div>
</div>

  
  </div>



  <article class="page" itemscope itemtype="https://schema.org/CreativeWork">
    <meta itemprop="headline" content="Setting up the Three.js renderer">
    <meta itemprop="description" content="IntroductionThe previous articles in this series were about:  Part 1: Reading VTK format particles with Javascript in a browser  Part 2: Saving the read-in particle data in a Vuex store  Part 3: Initialization of a store and the user interface before plotting the particles with Three.js.In this article we will discuss the actual process of visualization of the particles.The particles we are interested in are oriented ellipsoids.">
    <meta itemprop="datePublished" content="2017-02-27T23:30:00+13:00">
    

    <div class="page__inner-wrap">
      
        <header>
          <h1 id="page-title" class="page__title" itemprop="headline">Setting up the Three.js renderer
</h1>
          

  <p class="page__meta">
    

    

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-clock" aria-hidden="true"></i>
        
          12 minute read
        
      </span>
    
  </p>


        </header>
      

      <section class="page__content" itemprop="text">
        
          <aside class="sidebar__right sticky">
            <nav class="toc">
              <header><h4 class="nav__title"><i class="fas fa-file-alt"></i> Contents</h4></header>
              <ul class="toc__menu">
  <li><a href="#introduction">Introduction</a></li>
  <li><a href="#the-graphics-panel">The graphics panel</a></li>
  <li><a href="#the-renderer-template">The renderer template</a></li>
  <li><a href="#the-renderer-implementation">The renderer implementation</a></li>
</ul>

            </nav>
          </aside>
        
        <h5 id="introduction">Introduction</h5>
<p>The previous articles in this series were about:</p>

<ol>
  <li><a href="http://www.parresianz.com/javascript/typescript/vue/vuex/xml/reading-vtk-particles/">Part 1: Reading VTK format particles with Javascript in a browser</a></li>
  <li><a href="http://www.parresianz.com/javascript/typescript/vue/vuex/vuex-store/">Part 2: Saving the read-in particle data in a Vuex store</a></li>
  <li><a href="http://www.parresianz.com/javascript/typescript/threejs/vue/vtk-threejs/">Part 3: Initialization of a store and the user interface</a> before plotting the particles with Three.js.</li>
</ol>

<p>In this article we will discuss the actual process of visualization of the particles.<br />
The particles we are interested in are <a href="https://en.wikipedia.org/wiki/Ellipsoid">oriented ellipsoids</a>.
<!--more--></p>

<h5 id="the-graphics-panel">The graphics panel</h5>
<p>In the <code class="language-plaintext highlighter-rouge">main-panel</code> Vue component introduced in Part 3, we had declared a graphics panel
component called <code class="language-plaintext highlighter-rouge">three-graphics-panel</code>.  A simple Vue template for this component can be
written as:</p>

<figure class="highlight"><pre><code class="language-html" data-lang="html"><span class="nt">&lt;template&gt;</span>
  <span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">'three-graphics-container'</span><span class="nt">&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"uk-card uk-card-default uk-card-large"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"uk-card-body"</span><span class="nt">&gt;</span>
        <span class="c">&lt;!-- The renderer Vue component --&gt;</span>
        <span class="nt">&lt;three-renderer</span> <span class="na">v-bind:size=</span><span class="s">"{w:500, h:500}"</span><span class="nt">&gt;</span>
          <span class="c">&lt;!-- The scene Vue component --&gt;</span>
          <span class="nt">&lt;three-scene</span> <span class="na">v-bind:size=</span><span class="s">"size"</span><span class="nt">&gt;</span> 
            <span class="c">&lt;!-- The camera Vue component --&gt;</span>
            <span class="nt">&lt;three-camera</span>  <span class="na">v-bind:size=</span><span class="s">"size"</span>
                           <span class="na">v-bind:position=</span><span class="s">"{x: 100,  z: 15 }"</span><span class="nt">&gt;</span>
            <span class="nt">&lt;/three-camera&gt;</span>
            <span class="c">&lt;!-- The particles Vue component --&gt;</span>
            <span class="nt">&lt;three-ellipsoid-particles&gt;</span> <span class="nt">&lt;/three-ellipsoid-particles&gt;</span>
          <span class="nt">&lt;/three-scene&gt;</span>
        <span class="nt">&lt;/three-renderer&gt;</span>
      <span class="nt">&lt;/div&gt;</span>
    <span class="nt">&lt;/div&gt;</span>
  <span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;/template&gt;</span>
<span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"./ThreeGraphicsPanel.ts"</span><span class="nt">&gt;</span> <span class="nt">&lt;/script&gt;</span></code></pre></figure>

<p>As before, the CSS classes used in this example are from Uikit3.  The graphics panel uses
four child Vue components, <code class="language-plaintext highlighter-rouge">three-renderer</code>, <code class="language-plaintext highlighter-rouge">three-scene</code>, <code class="language-plaintext highlighter-rouge">three-camera</code>, and
<code class="language-plaintext highlighter-rouge">three-ellipsoid-particles</code>.  The implementation of <code class="language-plaintext highlighter-rouge">ThreeGraphicsPanel.ts</code> is also
straightforward in this case:</p>

<figure class="highlight"><pre><code class="language-js" data-lang="js"><span class="k">import</span> <span class="o">*</span> <span class="k">as</span> <span class="nx">Vue</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">vue</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="p">{</span><span class="nx">Component</span><span class="p">}</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">av-ts</span><span class="dl">"</span><span class="p">;</span>
<span class="p">@</span><span class="nd">Component</span><span class="p">({</span>
  <span class="na">name</span><span class="p">:</span> <span class="dl">'</span><span class="s1">three-graphics-panel</span><span class="dl">'</span>
<span class="p">})</span>
<span class="k">export</span> <span class="k">default</span> <span class="kd">class</span> <span class="nx">ThreeGraphicsPanel</span> <span class="kd">extends</span> <span class="nx">Vue</span> <span class="p">{</span>
  <span class="nl">name</span><span class="p">:</span> <span class="nx">string</span> <span class="o">=</span> <span class="dl">"</span><span class="s2">ThreeGraphicsPanel</span><span class="dl">"</span><span class="p">;</span>
  <span class="nl">size</span><span class="p">:</span> <span class="nb">Object</span> <span class="o">=</span> <span class="p">{</span>
    <span class="na">w</span><span class="p">:</span> <span class="mi">200</span><span class="p">,</span>
    <span class="na">h</span><span class="p">:</span> <span class="mi">200</span>
  <span class="p">};</span>
<span class="p">}</span></code></pre></figure>

<p class="notice">The <code class="language-plaintext highlighter-rouge">size</code> property is passed on to the children of three-graphics-panel and determines the
default size of the window in which the particles will be displayed.  This property can be
accessed by the children by using the
<a href="https://vuejs.org/v2/guide/components.html#Passing-Data-with-Props">“passing data with props approach.”</a></p>

<h5 id="the-renderer-template">The renderer template</h5>
<p>The first component instantiated in <code class="language-plaintext highlighter-rouge">three-graphics-panel</code> is the <code class="language-plaintext highlighter-rouge">three-renderer</code> component which
is passed the <code class="language-plaintext highlighter-rouge">size</code> argument using the <code class="language-plaintext highlighter-rouge">v-bind</code> directive.  Let use first examine
the <code class="language-plaintext highlighter-rouge">ThreeRenderer.vue</code> code:</p>

<figure class="highlight"><pre><code class="language-html" data-lang="html"><span class="nt">&lt;template&gt;</span>
  <span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">"three-renderer-div"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;slot&gt;&lt;/slot&gt;</span>
    <span class="nt">&lt;div</span> <span class="na">ref=</span><span class="s">"three-graphics-container"</span>
         <span class="na">id=</span><span class="s">"three-renderer-graphics-div"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;/div&gt;</span>
  <span class="nt">&lt;/div&gt;</span>
<span class="nt">&lt;/template&gt;</span>
<span class="nt">&lt;script </span><span class="na">src=</span><span class="s">"./ThreeRenderer.ts"</span><span class="nt">&gt;</span> <span class="nt">&lt;/script&gt;</span></code></pre></figure>

<p class="notice">The first new aspect to notice is the use of the
<a href="https://vuejs.org/v2/guide/components.html#Content-Distribution-with-Slots"><code class="language-plaintext highlighter-rouge">slot</code> tag</a>.  This
is needed to make sure that the <code class="language-plaintext highlighter-rouge">three-scene</code>, <code class="language-plaintext highlighter-rouge">three-camera</code>, and <code class="language-plaintext highlighter-rouge">three-ellipsoid-particles</code>
from the <code class="language-plaintext highlighter-rouge">three-graphics-panel</code> parent components are correctly instantiated and interpolated
into the DOM.</p>

<p class="notice">The second new aspect is the use of the <a href="https://vuejs.org/v2/api/#ref"><code class="language-plaintext highlighter-rouge">ref</code> attribute</a>
in the <code class="language-plaintext highlighter-rouge">div</code> element after the <code class="language-plaintext highlighter-rouge">slot</code>.  This element is used to create the HTML canvas as
a child of the renderer component.</p>

<p class="notice--info">We could add event handlers to this template to handle interactions with the camera.  That
aspect of the user interface will be discussed in a future article.</p>

<h5 id="the-renderer-implementation">The renderer implementation</h5>
<p>The renderer component is implemented in <code class="language-plaintext highlighter-rouge">ThreeRenderer.ts</code> which contains the following
code:</p>

<figure class="highlight"><pre><code class="language-js" data-lang="js"><span class="k">import</span> <span class="o">*</span> <span class="k">as</span> <span class="nx">Vue</span> <span class="k">from</span> <span class="dl">"</span><span class="s2">vue</span><span class="dl">"</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">THREE</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="dl">'</span><span class="s1">three</span><span class="dl">'</span><span class="p">);</span>
<span class="k">import</span> <span class="p">{</span> <span class="nx">Component</span><span class="p">,</span> <span class="nx">Lifecycle</span><span class="p">,</span> <span class="nx">Prop</span><span class="p">,</span> <span class="nx">p</span> <span class="p">}</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">av-ts</span><span class="dl">'</span><span class="p">;</span>
<span class="k">import</span> <span class="nx">Store</span> <span class="k">from</span> <span class="dl">'</span><span class="s1">../vuex/Store</span><span class="dl">'</span><span class="p">;</span>
<span class="kr">interface</span> <span class="nx">ScreenSize</span> <span class="p">{</span>
  <span class="nl">left</span> <span class="p">:</span> <span class="nx">number</span><span class="p">,</span> <span class="nx">top</span> <span class="p">:</span> <span class="nx">number</span><span class="p">,</span> <span class="nx">width</span> <span class="p">:</span> <span class="nx">number</span><span class="p">,</span> <span class="nx">height</span> <span class="p">:</span> <span class="nx">number</span>
<span class="p">}</span>
<span class="p">@</span><span class="nd">Component</span><span class="p">({</span>
  <span class="na">name</span><span class="p">:</span> <span class="dl">'</span><span class="s1">ThreeRenderer</span><span class="dl">'</span>
<span class="p">})</span>
<span class="k">export</span> <span class="k">default</span> <span class="kd">class</span> <span class="nx">ThreeRenderer</span> <span class="kd">extends</span> <span class="nx">Vue</span> <span class="p">{</span>
  <span class="c1">// These are the "prop" variables used by Vue</span>
  <span class="p">@</span><span class="nd">Prop</span>
  <span class="nx">size</span> <span class="o">=</span> <span class="nx">p</span><span class="p">({</span>
    <span class="na">type</span><span class="p">:</span> <span class="nb">Object</span><span class="p">,</span> <span class="c1">// { w, h }</span>
    <span class="na">required</span><span class="p">:</span> <span class="kc">true</span>
  <span class="p">});</span>
  <span class="p">@</span><span class="nd">Prop</span>
  <span class="nx">renderer</span> <span class="o">=</span> <span class="nx">p</span><span class="p">({</span>
    <span class="na">type</span><span class="p">:</span> <span class="nx">THREE</span><span class="p">.</span><span class="nx">WebGLRenderer</span>
  <span class="p">});</span>
  <span class="c1">// These are the "data" variables used by Vue</span>
  <span class="kr">public</span>  <span class="nx">d_renderer</span><span class="p">:</span> <span class="nx">THREE</span><span class="p">.</span><span class="nx">WebGLRenderer</span><span class="p">;</span>
  <span class="kr">private</span> <span class="nx">d_size</span><span class="p">:</span> <span class="nx">ScreenSize</span><span class="p">;</span>
  <span class="c1">// These are the computed properties</span>
  <span class="kd">get</span> <span class="nx">getScene</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">Store</span><span class="p">.</span><span class="nx">getters</span><span class="p">.</span><span class="nx">scene</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="kd">get</span> <span class="nx">getCamera</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">return</span> <span class="nx">Store</span><span class="p">.</span><span class="nx">getters</span><span class="p">.</span><span class="nx">camera</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="c1">// These are the lifecycle hooks</span>
  <span class="p">@</span><span class="nd">Lifecycle</span>
  <span class="nx">created</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">d_renderer</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">renderer</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">d_renderer</span> <span class="k">instanceof</span> <span class="nx">THREE</span><span class="p">.</span><span class="nx">WebGLRenderer</span><span class="p">))</span> <span class="p">{</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">d_renderer</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">THREE</span><span class="p">.</span><span class="nx">WebGLRenderer</span><span class="p">({</span> <span class="na">antialias</span><span class="p">:</span> <span class="kc">true</span> <span class="p">});</span>
    <span class="p">}</span>
    <span class="kd">let</span> <span class="nx">w</span> <span class="o">=</span> <span class="p">(</span><span class="o">&lt;</span><span class="nx">any</span><span class="o">&gt;</span><span class="k">this</span><span class="p">.</span><span class="nx">size</span><span class="p">).</span><span class="nx">w</span><span class="p">;</span>
    <span class="kd">let</span> <span class="nx">h</span> <span class="o">=</span> <span class="p">(</span><span class="o">&lt;</span><span class="nx">any</span><span class="o">&gt;</span><span class="k">this</span><span class="p">.</span><span class="nx">size</span><span class="p">).</span><span class="nx">h</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">d_size</span> <span class="o">=</span> <span class="p">{</span><span class="na">left</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="na">top</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="na">width</span><span class="p">:</span> <span class="nx">w</span><span class="p">,</span> <span class="na">height</span><span class="p">:</span> <span class="nx">w</span><span class="p">};</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">d_renderer</span><span class="p">.</span><span class="nx">setSize</span><span class="p">(</span><span class="nx">w</span><span class="p">,</span> <span class="nx">h</span><span class="p">);</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">d_renderer</span><span class="p">.</span><span class="nx">setClearColor</span><span class="p">(</span><span class="mh">0x52576e</span><span class="p">)</span>
  <span class="p">}</span>
  <span class="p">@</span><span class="nd">Lifecycle</span>
  <span class="nx">mounted</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">d_renderer</span><span class="p">.</span><span class="nx">domElement</span><span class="p">.</span><span class="nx">setAttribute</span><span class="p">(</span><span class="dl">"</span><span class="s2">id</span><span class="dl">"</span><span class="p">,</span> <span class="dl">"</span><span class="s2">three-graphics-canvas</span><span class="dl">"</span><span class="p">);</span>
    <span class="k">if</span> <span class="p">((</span><span class="k">this</span><span class="p">.</span><span class="nx">$refs</span><span class="p">)[</span><span class="dl">"</span><span class="s2">three-graphics-container</span><span class="dl">"</span><span class="p">])</span> <span class="p">{</span>
      <span class="kd">let</span> <span class="nx">el</span>  <span class="o">=</span> <span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">$refs</span><span class="p">)[</span><span class="dl">"</span><span class="s2">three-graphics-container</span><span class="dl">"</span><span class="p">];</span>
      <span class="p">(</span><span class="o">&lt;</span><span class="nx">any</span><span class="o">&gt;</span><span class="nx">el</span><span class="p">).</span><span class="nx">appendChild</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">d_renderer</span><span class="p">.</span><span class="nx">domElement</span><span class="p">);</span>

      <span class="c1">// Update based on actual screen size</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">setActualScreenSize</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">d_renderer</span><span class="p">.</span><span class="nx">domElement</span><span class="p">);</span>
      <span class="k">this</span><span class="p">.</span><span class="nx">d_renderer</span><span class="p">.</span><span class="nx">setSize</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">d_size</span><span class="p">.</span><span class="nx">width</span><span class="p">,</span> <span class="k">this</span><span class="p">.</span><span class="nx">d_size</span><span class="p">.</span><span class="nx">height</span><span class="p">);</span>
      <span class="kd">let</span> <span class="nx">camera</span> <span class="o">=</span> <span class="nx">Store</span><span class="p">.</span><span class="nx">getters</span><span class="p">.</span><span class="nx">camera</span><span class="p">;</span>
      <span class="nx">camera</span><span class="p">.</span><span class="nx">aspect</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">d_size</span><span class="p">.</span><span class="nx">width</span> <span class="o">/</span> <span class="k">this</span><span class="p">.</span><span class="nx">d_size</span><span class="p">.</span><span class="nx">height</span><span class="p">;</span>
      <span class="nx">camera</span><span class="p">.</span><span class="nx">updateProjectionMatrix</span><span class="p">();</span>
      <span class="nx">Store</span><span class="p">.</span><span class="nx">commit</span><span class="p">(</span><span class="dl">'</span><span class="s1">SET_CAMERA</span><span class="dl">'</span><span class="p">,</span> <span class="nx">camera</span><span class="p">);</span>
    <span class="p">}</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">animate</span><span class="p">();</span>
  <span class="p">}</span>
  <span class="p">@</span><span class="nd">Lifecycle</span>
  <span class="nx">beforeDestroy</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">Store</span><span class="p">.</span><span class="nx">commit</span><span class="p">(</span><span class="dl">'</span><span class="s1">DELETE_SCENE</span><span class="dl">'</span><span class="p">);</span>
    <span class="nx">Store</span><span class="p">.</span><span class="nx">commit</span><span class="p">(</span><span class="dl">'</span><span class="s1">DELETE_CAMERA</span><span class="dl">'</span><span class="p">);</span>
  <span class="p">}</span>
  <span class="c1">// If there is a resize, compute the new screen size</span>
  <span class="kr">private</span> <span class="nx">setActualScreenSize</span><span class="p">(</span><span class="nx">domElement</span><span class="p">:</span> <span class="nx">HTMLCanvasElement</span><span class="p">)</span> <span class="p">:</span> <span class="k">void</span> <span class="p">{</span>
    <span class="kd">let</span> <span class="nx">box</span> <span class="o">=</span> <span class="nx">domElement</span><span class="p">.</span><span class="nx">getBoundingClientRect</span><span class="p">();</span>
    <span class="kd">let</span> <span class="nx">d</span> <span class="o">=</span> <span class="nx">domElement</span><span class="p">.</span><span class="nx">ownerDocument</span><span class="p">.</span><span class="nx">docsumentElement</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">d_size</span><span class="p">.</span><span class="nx">left</span> <span class="o">=</span> <span class="nx">box</span><span class="p">.</span><span class="nx">left</span> <span class="o">+</span> <span class="nb">window</span><span class="p">.</span><span class="nx">docsXOffset</span> <span class="o">-</span> <span class="nx">d</span><span class="p">.</span><span class="nx">clientLeft</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">d_size</span><span class="p">.</span><span class="nx">top</span> <span class="o">=</span> <span class="nx">box</span><span class="p">.</span><span class="nx">top</span> <span class="o">+</span> <span class="nb">window</span><span class="p">.</span><span class="nx">docsYOffset</span> <span class="o">-</span> <span class="nx">d</span><span class="p">.</span><span class="nx">clientTop</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">d_size</span><span class="p">.</span><span class="nx">width</span> <span class="o">=</span> <span class="nx">box</span><span class="p">.</span><span class="nx">width</span><span class="p">;</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">d_size</span><span class="p">.</span><span class="nx">height</span> <span class="o">=</span> <span class="nx">box</span><span class="p">.</span><span class="nx">height</span><span class="p">;</span>
  <span class="p">}</span>
  <span class="c1">// Start the animation loop</span>
  <span class="kr">private</span> <span class="nx">animate</span><span class="p">()</span> <span class="p">{</span>
    <span class="nx">requestAnimationFrame</span><span class="p">(</span> <span class="k">this</span><span class="p">.</span><span class="nx">animate</span> <span class="p">);</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">render</span><span class="p">();</span>
  <span class="p">}</span>
  <span class="c1">// Do the actual rendering using the THREE.js render method</span>
  <span class="kr">private</span> <span class="nx">render</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">d_renderer</span><span class="p">.</span><span class="nx">render</span><span class="p">(</span><span class="nx">Store</span><span class="p">.</span><span class="nx">getters</span><span class="p">.</span><span class="nx">scene</span><span class="p">,</span> <span class="nx">Store</span><span class="p">.</span><span class="nx">getters</span><span class="p">.</span><span class="nx">camera</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">}</span></code></pre></figure>

<p class="notice">The main thing to note here is that we are using the THREE.WebGLRenderer, and 
the creation of the <code class="language-plaintext highlighter-rouge">canvas</code> element as a child of the renderer div element.<br />
The canvas element is created in the <code class="language-plaintext highlighter-rouge">mount</code> stage of the instance lifecycle and
all the plotting is done on that element.</p>

<h4 id="remarks">Remarks</h4>
<p>In the next part of this article we’ll discuss more details of setting up the scene and camera.</p>


        
      </section>

      <footer class="page__meta">
        
        


  


  
  
  

  <p class="page__taxonomy">
    <strong><i class="fas fa-fw fa-folder-open" aria-hidden="true"></i> Categories: </strong>
    <span itemprop="keywords">
    
      
      
      <a href="/ParSim/categories/#javascript" class="page__taxonomy-item" rel="tag">Javascript</a><span class="sep">, </span>
    
      
      
      <a href="/ParSim/categories/#threejs" class="page__taxonomy-item" rel="tag">Threejs</a><span class="sep">, </span>
    
      
      
      <a href="/ParSim/categories/#typescript" class="page__taxonomy-item" rel="tag">Typescript</a><span class="sep">, </span>
    
      
      
      <a href="/ParSim/categories/#vue" class="page__taxonomy-item" rel="tag">Vue</a>
    
    </span>
  </p>


        
  <p class="page__date"><strong><i class="fas fa-fw fa-calendar-alt" aria-hidden="true"></i> Updated:</strong> <time datetime="2017-02-27T23:30:00+13:00">February 27, 2017</time></p>


      </footer>

      <section class="page__share">
  
    <h4 class="page__share-title">Share on</h4>
  

  <a href="https://twitter.com/intent/tweet?text=Setting+up+the+Three.js+renderer%20https%3A%2F%2Fbbanerjee.github.io%2FParSim%2Fjavascript%2Ftypescript%2Fthreejs%2Fvue%2Fvtk-threejs-renderer%2F" class="btn btn--twitter" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on Twitter"><i class="fab fa-fw fa-twitter" aria-hidden="true"></i><span> Twitter</span></a>

  <a href="https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Fbbanerjee.github.io%2FParSim%2Fjavascript%2Ftypescript%2Fthreejs%2Fvue%2Fvtk-threejs-renderer%2F" class="btn btn--facebook" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on Facebook"><i class="fab fa-fw fa-facebook" aria-hidden="true"></i><span> Facebook</span></a>

  <a href="https://www.linkedin.com/shareArticle?mini=true&url=https%3A%2F%2Fbbanerjee.github.io%2FParSim%2Fjavascript%2Ftypescript%2Fthreejs%2Fvue%2Fvtk-threejs-renderer%2F" class="btn btn--linkedin" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on LinkedIn"><i class="fab fa-fw fa-linkedin" aria-hidden="true"></i><span> LinkedIn</span></a>
</section>


      
  <nav class="pagination">
    
      <a href="/ParSim/javascript/typescript/threejs/vue/vtk-threejs/" class="pagination--pager" title="Plotting VTK particles with Three.js
">Previous</a>
    
    
      <a href="/ParSim/javascript/typescript/threejs/vue/vtk-threejs-camera/" class="pagination--pager" title="Setting up the Three.js scene and camera
">Next</a>
    
  </nav>

    </div>

    
  </article>

  
  
    <div class="page__related">
      <h4 class="page__related-title">You may also enjoy</h4>
      <div class="grid__wrapper">
        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        <a href="/ParSim/fem/meshing/gmsh/gmsh-meshing-for-code-aster/" rel="permalink">Meshes with different element topologies in gmsh (for Code-Aster)
</a>
      
    </h2>
    

  <p class="page__meta">
    

    

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-clock" aria-hidden="true"></i>
        
          39 minute read
        
      </span>
    
  </p>


    <p class="archive__item-excerpt" itemprop="description">We have been translating a few Code-Aster verification test manuals into English.
The process is not just a straightforward translation of the text in the Fr...</p>
  </article>
</div>

        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        <a href="/ParSim/fem/meshing/gmsh/quadrlateral-meshing-with-gmsh/" rel="permalink">Creating quadrilateral surface meshes with gmsh
</a>
      
    </h2>
    

  <p class="page__meta">
    

    

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-clock" aria-hidden="true"></i>
        
          21 minute read
        
      </span>
    
  </p>


    <p class="archive__item-excerpt" itemprop="description">The Code-Aster cooling tower modal analysis validation test
FORMA11c comes with a quadrilateral mesh provided by Code-Aster.
Tips on quadrilateral meshing wi...</p>
  </article>
</div>

        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        <a href="/ParSim/fem/cracks/python/salome-meca/code-aster/inspecting-and-manipulating-meshes/" rel="permalink">Inspecting and manipulating meshes in Salome-Meca for Code-Aster
</a>
      
    </h2>
    

  <p class="page__meta">
    

    

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-clock" aria-hidden="true"></i>
        
          30 minute read
        
      </span>
    
  </p>


    <p class="archive__item-excerpt" itemprop="description">In this article, I will discuss how elements can be selected from deep inside a 3D mesh
in the Salome-Meca environment and manipulated with Python scripts.

</p>
  </article>
</div>

        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title no_toc" itemprop="headline">
      
        <a href="/ParSim/vaango/compiling-vaango-on-a-cray/" rel="permalink">Compiling and running the MPM code Vaango on a Cray
</a>
      
    </h2>
    

  <p class="page__meta">
    

    

    
      
      

      <span class="page__meta-readtime">
        <i class="far fa-clock" aria-hidden="true"></i>
        
          16 minute read
        
      </span>
    
  </p>


    <p class="archive__item-excerpt" itemprop="description">Introduction

One of the reasons I switched to cmake for my builds was the need to compile my
Vaango code on a BlueGene/Q system.  The code was previously co...</p>
  </article>
</div>

        
      </div>
    </div>
  
  
</div>

    </div>

    

    <div id="footer" class="page__footer">
      <footer>
        <!-- start custom footer snippets -->

<!-- end custom footer snippets -->
        <div class="page__footer-follow">
  <ul class="social-icons">
    
      <li><strong>Follow:</strong></li>
    

    
      
        
      
        
      
    

    <li><a href="/ParSim/feed.xml"><i class="fas fa-fw fa-rss-square" aria-hidden="true"></i> Feed</a></li>
  </ul>
</div>

<div class="page__footer-copyright">&copy; 2022 Biswajit Banerjee. Powered by <a href="https://jekyllrb.com" rel="nofollow">Jekyll</a> &amp; <a href="https://mademistakes.com/work/minimal-mistakes-jekyll-theme/" rel="nofollow">Minimal Mistakes</a>.</div>

      </footer>
    </div>

    
  <script src="/ParSim/assets/js/main.min.js"></script>










  </body>
</html>
